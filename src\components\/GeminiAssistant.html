<!-- Gemini AI Assistant Component - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© -->
<div class="gemini-assistant" id="geminiAssistant">
    <!-- Ø±Ø£Ø³ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ -->
    <div class="assistant-header">
        <div class="assistant-brand">
            <div class="assistant-avatar">
                <i class="fas fa-robot"></i>
                <div class="ai-badge">AI</div>
            </div>
            <div class="assistant-info">
                <h4>
                    <span class="assistant-title">Ù…Ø³Ø§Ø¹Ø¯ Nexus Ø§Ù„Ø°ÙƒÙŠ</span>
                    <span class="assistant-version">v2.0</span>
                </h4>
                <div class="assistant-status">
                    <div class="status-indicator" id="apiStatus">
                        <i class="fas fa-circle"></i>
                        <span id="statusText">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="assistant-controls">
            <select class="mode-select" id="aiMode" onchange="changeAIMode(this.value)">
                <option value="chat">ğŸ’¬ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¹Ø§Ù…Ø©</option>
                <option value="script">ğŸ“ ÙƒØªØ§Ø¨Ø© Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ</option>
                <option value="ideas">ğŸ’¡ ØªÙˆÙ„ÙŠØ¯ Ø£ÙÙƒØ§Ø±</option>
                <option value="analysis">ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¡</option>
                <option value="design">ğŸ¨ ØªØµÙ…ÙŠÙ… Ø¬Ø±Ø§ÙÙŠÙƒ</option>
            </select>
            
            <button class="control-btn" onclick="clearChat()" title="Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©">
                <i class="fas fa-trash"></i>
            </button>
            
            <button class="control-btn" onclick="toggleAIAssistant()" title="Ø¥ØºÙ„Ø§Ù‚">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    
    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© -->
    <div class="assistant-chat-container">
        <div class="assistant-chat" id="aiChatWindow">
            <!-- Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
            <div class="message ai-welcome">
                <div class="message-avatar">ğŸ¤–</div>
                <div class="message-content">
                    <div class="message-sender">Ù…Ø³Ø§Ø¹Ø¯ Nexus</div>
                    <div class="message-body">
                        <h4>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Nexus Studio! ğŸ‘‹</h4>
                        <p>Ø£Ù†Ø§ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ. ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:</p>
                        <ul>
                            <li>ğŸ“ ÙƒØªØ§Ø¨Ø© Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</li>
                            <li>ğŸ’¡ ØªÙˆÙ„ÙŠØ¯ Ø£ÙÙƒØ§Ø± Ù…Ø­ØªÙˆÙ‰ Ù…Ø¨ØªÙƒØ±Ø©</li>
                            <li>ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</li>
                            <li>ğŸ¨ ØªØµÙ…ÙŠÙ… Ø§Ù„Ø«Ù…Ø¨Ù†ÙŠÙ„Ø§Øª ÙˆØ§Ù„Ø¬Ø±Ø§ÙÙŠÙƒ</li>
                            <li>ğŸ“¡ ØªØ­Ø¶ÙŠØ± Ø®Ø·Ø· Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</li>
                        </ul>
                        <p>ğŸ’¡ <strong>Ù†ØµÙŠØ­Ø©:</strong> Ø§Ø®ØªØ± Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬!</p>
                    </div>
                    <div class="message-time" id="welcomeTime"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
    <div class="quick-tools">
        <div class="tools-header">
            <h5><i class="fas fa-bolt"></i> Ø£Ø¯ÙˆØ§Øª Ø³Ø±ÙŠØ¹Ø©</h5>
        </div>
        
        <div class="tools-grid">
            <button class="tool-card" onclick="quickAction('Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø¹Ù† Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ')">
                <div class="tool-icon" style="background: #6366f1;">
                    <i class="fas fa-scroll"></i>
                </div>
                <div class="tool-info">
                    <div class="tool-name">Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ ÙÙŠØ¯ÙŠÙˆ</div>
                    <div class="tool-desc">ÙƒØªØ§Ø¨Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ©</div>
                </div>
            </button>
            
            <button class="tool-card" onclick="quickAction('Ø£ÙÙƒØ§Ø± ÙÙŠØ¯ÙŠÙˆ Ø¹Ù† Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§')">
                <div class="tool-icon" style="background: #10b981;">
                    <i class="fas fa-lightbulb"></i>
                </div>
                <div class="tool-info">
                    <div class="tool-name">Ø£ÙÙƒØ§Ø± Ù…Ø­ØªÙˆÙ‰</div>
                    <div class="tool-desc">Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© ÙˆØ¬Ø¯ÙŠØ¯Ø©</div>
                </div>
            </button>
            
            <button class="tool-card" onclick="quickAction('Ø­Ù„Ù„ ÙÙŠØ¯ÙŠÙˆ Ø­ØµÙ„ Ø¹Ù„Ù‰ 5000 Ù…Ø´Ø§Ù‡Ø¯Ø©')">
                <div class="tool-icon" style="background: #f59e0b;">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="tool-info">
                    <div class="tool-name">ØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¡</div>
                    <div class="tool-desc">Ù†Ù‚Ø§Ø· Ù‚ÙˆØ© ÙˆØ¶Ø¹Ù</div>
                </div>
            </button>
            
            <button class="tool-card" onclick="quickAction('ØµÙ…Ù… Ø«Ø§Ù…Ø¨Ø±ÙŠÙ„ Ù„ÙÙŠØ¯ÙŠÙˆ ØªØ¹Ù„ÙŠÙ…ÙŠ')">
                <div class="tool-icon" style="background: #8b5cf6;">
                    <i class="fas fa-palette"></i>
                </div>
                <div class="tool-info">
                    <div class="tool-name">ØªØµÙ…ÙŠÙ… Ø¬Ø±Ø§ÙÙŠÙƒ</div>
                    <div class="tool-desc">Ø«Ù…Ø¨Ù†ÙŠÙ„Ø§Øª ÙˆØ¨Ø§Ù†Ø±Ø§Øª</div>
                </div>
            </button>
        </div>
    </div>
    
    <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ -->
    <div class="input-section">
        <div class="input-container">
            <div class="input-wrapper">
                <textarea 
                    id="aiInput" 
                    placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§... (Ø§Ø¶ØºØ· Enter Ù„Ù„Ø¥Ø±Ø³Ø§Ù„)"
                    rows="2"
                    oninput="adjustTextareaHeight(this)"
                    onkeydown="handleInputKey(event)"
                ></textarea>
                
                <div class="input-actions">
                    <button class="action-btn" onclick="showTemplates()" title="Ù‚ÙˆØ§Ù„Ø¨ Ø¬Ø§Ù‡Ø²Ø©">
                        <i class="fas fa-magic"></i>
                    </button>
                    
                    <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                        <i class="fas fa-paper-plane"></i>
                        <span>Ø¥Ø±Ø³Ø§Ù„</span>
                    </button>
                </div>
            </div>
            
            <div class="input-hints">
                <span class="hint-text">ğŸ’¡ Ø¬Ø±Ø¨:</span>
                <button class="hint-btn" onclick="setExample('ÙƒÙŠÙ Ø£Ø¨Ø¯Ø£ Ù‚Ù†Ø§Ø© ÙŠÙˆØªÙŠÙˆØ¨ Ù†Ø§Ø¬Ø­Ø©ØŸ')">
                    Ø¨Ø¯Ø¡ Ù‚Ù†Ø§Ø© ÙŠÙˆØªÙŠÙˆØ¨
                </button>
                <button class="hint-btn" onclick="setExample('Ø£ÙØ¶Ù„ Ø·Ø±Ù‚ Ù„ØªØ­Ø³ÙŠÙ† Ù…Ø´Ø§Ù‡Ø¯Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ')">
                    ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª
                </button>
                <button class="hint-btn" onclick="setExample('Ø®Ø·Ø· Ù„Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± Ø¹Ù† Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§')">
                    Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±
                </button>
            </div>
        </div>
    </div>
    
    <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… -->
    <div class="system-status">
        <div class="status-item">
            <i class="fas fa-database"></i>
            <span>Ø§Ù„Ø°Ø§ÙƒØ±Ø©: <span id="chatMemory">0</span> Ø±Ø³Ø§Ù„Ø©</span>
        </div>
        <div class="status-item">
            <i class="fas fa-bolt"></i>
            <span>Ø§Ù„ÙˆØ¶Ø¹: <span id="currentMode">Ù…Ø­Ø§Ø¯Ø«Ø©</span></span>
        </div>
        <div class="status-item">
            <i class="fas fa-clock"></i>
            <span>Ø¢Ø®Ø± Ù†Ø´Ø§Ø·: <span id="lastActivity">Ø§Ù„Ø¢Ù†</span></span>
        </div>
    </div>
</div>

<!-- Ù‚ÙˆØ§Ù„Ø¨ Ø¬Ø§Ù‡Ø²Ø© -->
<div class="templates-modal" id="templatesModal">
    <div class="modal-content">
        <div class="modal-header">
            <h4><i class="fas fa-layer-group"></i> Ù‚ÙˆØ§Ù„Ø¨ Ø¬Ø§Ù‡Ø²Ø©</h4>
            <button class="modal-close" onclick="closeTemplates()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="template-category">
                <h5>ğŸ“ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª</h5>
                <div class="template-list">
                    <button class="template-item" onclick="useTemplate('Ø§ÙƒØªØ¨ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ ÙÙŠØ¯ÙŠÙˆ ØªØ¹Ù„ÙŠÙ…ÙŠ Ø¹Ù† [Ù…ÙˆØ¶ÙˆØ¹]')">
                        ÙÙŠØ¯ÙŠÙˆ ØªØ¹Ù„ÙŠÙ…ÙŠ
                    </button>
                    <button class="template-item" onclick="useTemplate('Ø§ÙƒØªØ¨ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ ÙÙŠØ¯ÙŠÙˆ ØªØ±ÙÙŠÙ‡ÙŠ Ø¹Ù† [Ù…ÙˆØ¶ÙˆØ¹]')">
                        ÙÙŠØ¯ÙŠÙˆ ØªØ±ÙÙŠÙ‡ÙŠ
                    </button>
                    <button class="template-item" onclick="useTemplate('Ø§ÙƒØªØ¨ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ ÙÙŠØ¯ÙŠÙˆ ØªØ³ÙˆÙŠÙ‚ÙŠ Ø¹Ù† [Ù…Ù†ØªØ¬]')">
                        ÙÙŠØ¯ÙŠÙˆ ØªØ³ÙˆÙŠÙ‚ÙŠ
                    </button>
                </div>
            </div>
            
            <div class="template-category">
                <h5>ğŸ’¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø£ÙÙƒØ§Ø±</h5>
                <div class="template-list">
                    <button class="template-item" onclick="useTemplate('Ø£Ø¹Ø·Ù†ÙŠ 5 Ø£ÙÙƒØ§Ø± ÙÙŠØ¯ÙŠÙˆ Ù„Ù‚Ø·Ø§Ø¹ [Ø§Ù„Ù‚Ø·Ø§Ø¹]')">
                        Ø£ÙÙƒØ§Ø± Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø·Ø§Ø¹
                    </button>
                    <button class="template-item" onclick="useTemplate('Ø£Ø¹Ø·Ù†ÙŠ 5 Ø£ÙÙƒØ§Ø± ÙÙŠØ¯ÙŠÙˆ Ù„Ù„Ø¬Ù…Ù‡ÙˆØ± [Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±]')">
                        Ø£ÙÙƒØ§Ø± Ø­Ø³Ø¨ Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±
                    </button>
                    <button class="template-item" onclick="useTemplate('Ø£Ø¹Ø·Ù†ÙŠ 5 Ø£ÙÙƒØ§Ø± ÙÙŠØ¯ÙŠÙˆ Ù„Ù„Ù…Ù†ØµØ© [Ø§Ù„Ù…Ù†ØµØ©]')">
                        Ø£ÙÙƒØ§Ø± Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†ØµØ©
                    </button>
                </div>
            </div>
            
            <div class="template-category">
                <h5>ğŸ“Š Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª</h5>
                <div class="template-list">
                    <button class="template-item" onclick="useTemplate('Ø­Ù„Ù„ Ø£Ø¯Ø§Ø¡ ÙÙŠØ¯ÙŠÙˆ Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª [Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª]')">
                        ØªØ­Ù„ÙŠÙ„ Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù…
                    </button>
                    <button class="template-item" onclick="useTemplate('Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨ÙŠÙ† ÙÙŠØ¯ÙŠÙˆÙ‡ÙŠÙ† Ø¹Ù† [Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹]')">
                        Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨ÙŠÙ† ÙÙŠØ¯ÙŠÙˆÙ‡ÙŠÙ†
                    </button>
                    <button class="template-item" onclick="useTemplate('ØªÙˆØµÙŠØ§Øª Ù„ØªØ­Ø³ÙŠÙ† Ø£Ø¯Ø§Ø¡ [Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰]')">
                        ØªÙˆØµÙŠØ§Øª Ù„Ù„ØªØ­Ø³ÙŠÙ†
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Ø£Ù†Ù…Ø§Ø· CSS -->
<style>
    /* Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
    .gemini-assistant {
        background: white;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        height: 700px;
        display: flex;
        flex-direction: column;
        font-family: 'Cairo', sans-serif;
    }
    
    /* Ø§Ù„Ø±Ø£Ø³ */
    .assistant-header {
        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: white;
    }
    
    .assistant-brand {
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .assistant-avatar {
        position: relative;
        width: 50px;
        height: 50px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
    }
    
    .ai-badge {
        position: absolute;
        bottom: -5px;
        right: -5px;
        background: #10b981;
        color: white;
        font-size: 10px;
        padding: 2px 6px;
        border-radius: 10px;
        font-weight: bold;
    }
    
    .assistant-info h4 {
        margin: 0;
        font-size: 18px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .assistant-version {
        background: rgba(255, 255, 255, 0.2);
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 12px;
    }
    
    .assistant-status {
        margin-top: 5px;
    }
    
    .status-indicator {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 12px;
        opacity: 0.9;
    }
    
    .status-indicator i {
        font-size: 8px;
        color: #10b981;
    }
    
    .assistant-controls {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .mode-select {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 10px;
        padding: 8px 15px;
        color: white;
        font-size: 14px;
        cursor: pointer;
        min-width: 160px;
    }
    
    .mode-select option {
        background: #6366f1;
        color: white;
    }
    
    .control-btn {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 8px;
        width: 36px;
        height: 36px;
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
    }
    
    .control-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
    }
    
    /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© */
    .assistant-chat-container {
        flex: 1;
        overflow: hidden;
        background: #f8fafc;
    }
    
    .assistant-chat {
        height: 100%;
        overflow-y: auto;
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    
    .assistant-chat::-webkit-scrollbar {
        width: 6px;
    }
    
    .assistant-chat::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 3px;
    }
    
    .assistant-chat::-webkit-scrollbar-thumb {
        background: rgba(99, 102, 241, 0.3);
        border-radius: 3px;
    }
    
    /* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
    .message {
        display: flex;
        gap: 12px;
        animation: fadeIn 0.3s ease-out;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .message-avatar {
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 16px;
        flex-shrink: 0;
    }
    
    .message.user .message-avatar {
        background: linear-gradient(135deg, #10b981, #059669);
    }
    
    .message-content {
        flex: 1;
        background: white;
        border-radius: 15px;
        padding: 15px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        max-width: 85%;
    }
    
    .message.user .message-content {
        background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
        border: 1px solid #bae6fd;
    }
    
    .message.ai-welcome .message-content {
        background: linear-gradient(135deg, #fef3c7, #fde68a);
        border: 1px solid #fbbf24;
    }
    
    .message-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
    }
    
    .message-sender {
        font-weight: 700;
        color: #1f2937;
        font-size: 14px;
    }
    
    .message-time {
        font-size: 11px;
        color: #6b7280;
    }
    
    .message-body {
        color: #374151;
        line-height: 1.6;
        font-size: 14px;
    }
    
    .message-body h4 {
        margin: 0 0 10px 0;
        color: #1f2937;
    }
    
    .message-body ul {
        margin: 10px 0;
        padding-right: 20px;
    }
    
    .message-body li {
        margin-bottom: 5px;
    }
    
    .message-body strong {
        color: #1f2937;
    }
    
    /* Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© */
    .quick-tools {
        border-top: 1px solid #e5e7eb;
        background: white;
        padding: 15px;
    }
    
    .tools-header {
        margin-bottom: 15px;
    }
    
    .tools-header h5 {
        margin: 0;
        color: #1f2937;
        font-size: 16px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .tools-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
    }
    
    .tool-card {
        background: #f8fafc;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 12px;
        display: flex;
        align-items: center;
        gap: 10px;
        cursor: pointer;
        transition: all 0.2s;
        text-align: right;
    }
    
    .tool-card:hover {
        background: white;
        border-color: #6366f1;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(99, 102, 241, 0.1);
    }
    
    .tool-icon {
        width: 40px;
        height: 40px;
        background: #6366f1;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 18px;
        flex-shrink: 0;
    }
    
    .tool-info {
        flex: 1;
    }
    
    .tool-name {
        font-weight: 600;
        color: #1f2937;
        font-size: 13px;
        margin-bottom: 2px;
    }
    
    .tool-desc {
        color: #6b7280;
        font-size: 11px;
    }
    
    /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
    .input-section {
        border-top: 1px solid #e5e7eb;
        background: white;
        padding: 15px 20px;
    }
    
    .input-container {
        position: relative;
    }
    
    .input-wrapper {
        position: relative;
        margin-bottom: 10px;
    }
    
    #aiInput {
        width: 100%;
        background: #f8fafc;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        padding: 12px 50px 12px 15px;
        color: #1f2937;
        font-size: 14px;
        resize: none;
        min-height: 60px;
        max-height: 120px;
        line-height: 1.5;
        font-family: 'Cairo', sans-serif;
        transition: all 0.2s;
    }
    
    #aiInput:focus {
        outline: none;
        border-color: #6366f1;
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }
    
    .input-actions {
        position: absolute;
        left: 12px;
        bottom: 12px;
        display: flex;
        gap: 8px;
    }
    
    .action-btn {
        background: white;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        width: 36px;
        height: 36px;
        color: #6b7280;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
    }
    
    .action-btn:hover {
        background: #f3f4f6;
        color: #6366f1;
    }
    
    .send-btn {
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        border: none;
        border-radius: 10px;
        padding: 0 20px;
        height: 40px;
        color: white;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.2s;
    }
    
    .send-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }
    
    .send-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
    }
    
    .input-hints {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
    }
    
    .hint-text {
        color: #6b7280;
        font-size: 13px;
        font-weight: 500;
    }
    
    .hint-btn {
        background: #f0f9ff;
        border: 1px solid #bae6fd;
        border-radius: 20px;
        padding: 4px 12px;
        color: #0369a1;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.2s;
    }
    
    .hint-btn:hover {
        background: #e0f2fe;
        transform: translateY(-1px);
    }
    
    /* Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… */
    .system-status {
        display: flex;
        justify-content: space-between;
        padding: 10px 20px;
        background: #f8fafc;
        border-top: 1px solid #e5e7eb;
        font-size: 12px;
    }
    
    .status-item {
        display: flex;
        align-items: center;
        gap: 6px;
        color: #6b7280;
    }
    
    .status-item i {
        font-size: 12px;
        color: #6366f1;
    }
    
    #chatMemory, #currentMode, #lastActivity {
        color: #1f2937;
        font-weight: 600;
    }
    
    /* Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
    .templates-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 2000;
        animation: fadeIn 0.3s ease-out;
    }
    
    .templates-modal.active {
        display: flex;
    }
    
    .modal-content {
        background: white;
        border-radius: 20px;
        width: 90%;
        max-width: 500px;
        max-height: 80vh;
        overflow: hidden;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        animation: slideUp 0.3s ease-out;
    }
    
    @keyframes slideUp {
        from { transform: translateY(30px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }
    
    .modal-header {
        padding: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #e5e7eb;
    }
    
    .modal-header h4 {
        margin: 0;
        color: #1f2937;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .modal-close {
        background: #f3f4f6;
        border: none;
        width: 36px;
        height: 36px;
        border-radius: 10px;
        color: #6b7280;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
    }
    
    .modal-close:hover {
        background: #e5e7eb;
        color: #1f2937;
    }
    
    .modal-body {
        padding: 20px;
        overflow-y: auto;
        max-height: 60vh;
    }
    
    .template-category {
        margin-bottom: 25px;
    }
    
    .template-category h5 {
        color: #1f2937;
        font-size: 16px;
        margin: 0 0 15px 0;
        padding-bottom: 10px;
        border-bottom: 2px solid #f3f4f6;
    }
    
    .template-list {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }
    
    .template-item {
        background: #f8fafc;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 12px 15px;
        color: #374151;
        text-align: right;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 14px;
    }
    
    .template-item:hover {
        background: white;
        border-color: #6366f1;
        transform: translateX(-5px);
        box-shadow: 0 4px 12px rgba(99, 102, 241, 0.1);
    }
    
    /* Ø§Ù„ØªØ¬Ø§ÙˆØ¨ */
    @media (max-width: 768px) {
        .gemini-assistant {
            height: 100vh;
            border-radius: 0;
        }
        
        .assistant-header {
            flex-direction: column;
            gap: 15px;
            text-align: center;
        }
        
        .assistant-controls {
            width: 100%;
            justify-content: space-between;
        }
        
        .tools-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .system-status {
            flex-direction: column;
            gap: 8px;
            align-items: center;
        }
        
        .modal-content {
            width: 95%;
            margin: 10px;
        }
    }
</style>

<!-- JavaScript Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù…ÙƒÙˆÙ† -->
<script>
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ØªØ±Ø­ÙŠØ¨ÙŠ
    document.getElementById('welcomeTime').textContent = new Date().toLocaleTimeString('ar-EG', {
        hour: '2-digit',
        minute: '2-digit'
    });
    
    // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© API
    function updateAPIStatus() {
        const statusElement = document.getElementById('apiStatus');
        const statusText = document.getElementById('statusText');
        
        if (!statusElement || !statusText) return;
        
        if (window.geminiAI) {
            const isDemo = window.geminiAI.isDemoMode;
            
            if (isDemo) {
                statusElement.innerHTML = '<i class="fas fa-exclamation-triangle" style="color: #f59e0b;"></i>';
                statusText.textContent = 'ÙˆØ¶Ø¹ ØªØ¬Ø±ÙŠØ¨ÙŠ';
                statusElement.title = 'Ø£Ø¶Ù Gemini API Key Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙŠØ²Ø§Øª ÙƒØ§Ù…Ù„Ø©';
            } else {
                statusElement.innerHTML = '<i class="fas fa-check-circle" style="color: #10b981;"></i>';
                statusText.textContent = 'Ù…ØªØµÙ„';
                statusElement.title = 'Gemini AI Ù…ÙØ¹Ù„';
            }
        }
    }
    
    // Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
    async function sendMessage() {
        const input = document.getElementById('aiInput');
        if (!input) return;
        
        const message = input.value.trim();
        if (!message) return;
        
        // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        addMessage('user', message);
        
        // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚Ù„
        input.value = '';
        adjustTextareaHeight(input);
        
        // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
        const sendBtn = document.getElementById('sendBtn');
        if (sendBtn) {
            sendBtn.disabled = true;
            sendBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
        }
        
        try {
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø¯
            let response;
            const mode = document.getElementById('aiMode').value;
            
            if (window.geminiAI) {
                switch(mode) {
                    case 'script':
                        response = await window.geminiAI.generateScript(message);
                        break;
                    case 'ideas':
                        response = await window.geminiAI.generateVideoIdeas([message]);
                        break;
                    case 'analysis':
                        response = await window.geminiAI.analyzePerformance({ topic: message });
                        break;
                    case 'design':
                        response = await window.geminiAI.generateThumbnailPrompt(message);
                        break;
                    default:
                        response = await window.geminiAI.generateContent(message);
                }
            } else {
                response = 'Gemini AI ØºÙŠØ± Ù…ØªØ§Ø­. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª.';
            }
            
            // Ø¥Ø¶Ø§ÙØ© Ø±Ø¯ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯
            addMessage('ai', response);
            
            // Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„
            saveToHistory(message, response, mode);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            updateStats();
            
        } catch (error) {
            console.error('Error sending message:', error);
            addMessage('ai', 'âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
        } finally {
            // ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
            if (sendBtn) {
                sendBtn.disabled = false;
                sendBtn.innerHTML = '<i class="fas fa-paper-plane"></i><span>Ø¥Ø±Ø³Ø§Ù„</span>';
            }
        }
    }
    
    // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©
    function addMessage(sender, content) {
        const chatWindow = document.getElementById('aiChatWindow');
        if (!chatWindow) return;
        
        const messageId = `msg_${Date.now()}`;
        const timestamp = new Date().toLocaleTimeString('ar-EG', {
            hour: '2-digit',
            minute: '2-digit'
        });
        
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${sender}`;
        
        const avatar = sender === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–';
        const senderName = sender === 'user' ? 'Ø£Ù†Øª' : 'Ù…Ø³Ø§Ø¹Ø¯ Nexus';
        
        messageDiv.innerHTML = `
            <div class="message-avatar">${avatar}</div>
            <div class="message-content">
                <div class="message-header">
                    <span class="message-sender">${senderName}</span>
                    <span class="message-time">${timestamp}</span>
                </div>
                <div class="message-body">${formatMessage(content)}</div>
            </div>
        `;
        
        chatWindow.appendChild(messageDiv);
        
        // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ø£Ø³ÙÙ„
        scrollToBottom();
    }
    
    // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
    function formatMessage(content) {
        if (!content) return '';
        
        let formatted = content
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/\*(.*?)\*/g, '<em>$1</em>')
            .replace(/`(.*?)`/g, '<code>$1</code>')
            .replace(/\n/g, '<br>');
        
        return formatted;
    }
    
    // Ø¶Ø¨Ø· Ø§Ø±ØªÙØ§Ø¹ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù†Øµ
    function adjustTextareaHeight(textarea) {
        if (!textarea) return;
        textarea.style.height = 'auto';
        textarea.style.height = (textarea.scrollHeight) + 'px';
    }
    
    // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ø£Ø³ÙÙ„
    function scrollToBottom() {
        const chatWindow = document.getElementById('aiChatWindow');
        if (chatWindow) {
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }
    }
    
    // Ù…Ø¹Ø§Ù„Ø¬ Ø¶ØºØ·Ø§Øª Ø§Ù„Ù…ÙØ§ØªÙŠØ­
    function handleInputKey(event) {
        if (event.key === 'Enter' && !event.shiftKey) {
            event.preventDefault();
            sendMessage();
        }
    }
    
    // ØªØºÙŠÙŠØ± ÙˆØ¶Ø¹ AI
    function changeAIMode(mode) {
        const modeNames = {
            'chat': 'Ù…Ø­Ø§Ø¯Ø«Ø©',
            'script': 'Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ',
            'ideas': 'Ø£ÙÙƒØ§Ø±',
            'analysis': 'ØªØ­Ù„ÙŠÙ„',
            'design': 'ØªØµÙ…ÙŠÙ…'
        };
        
        document.getElementById('currentMode').textContent = modeNames[mode] || mode;
        
        // ØªØ­Ø¯ÙŠØ« ØªÙ„Ù…ÙŠØ­ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
        const input = document.getElementById('aiInput');
        const hints = {
            'chat': 'Ø§Ø³Ø£Ù„ Ø¹Ù† Ø£ÙŠ Ø´ÙŠØ¡...',
            'script': 'Ø§ÙƒØªØ¨ Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...',
            'ideas': 'Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø§Øª Ù…ÙØªØ§Ø­ÙŠØ©...',
            'analysis': 'ØµÙ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...',
            'design': 'ØµÙ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨...'
        };
        
        if (input) {
            input.placeholder = hints[mode] || 'Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§...';
        }
        
        showNotification(`âœ… ØªÙ… Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¥Ù„Ù‰: ${modeNames[mode] || mode}`);
    }
    
    // Ø¥Ø¬Ø±Ø§Ø¡ Ø³Ø±ÙŠØ¹
    function quickAction(text) {
        const input = document.getElementById('aiInput');
        if (input) {
            input.value = text;
            input.focus();
            adjustTextareaHeight(input);
            showNotification('âœï¸ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø±Ø³Ø§Ù„');
        }
    }
    
    // ØªØ¹ÙŠÙŠÙ† Ù…Ø«Ø§Ù„
    function setExample(text) {
        const input = document.getElementById('aiInput');
        if (input) {
            input.value = text;
            input.focus();
            adjustTextareaHeight(input);
        }
    }
    
    // Ø¹Ø±Ø¶ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨
    function showTemplates() {
        document.getElementById('templatesModal').classList.add('active');
    }
    
    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨
    function closeTemplates() {
        document.getElementById('templatesModal').classList.remove('active');
    }
    
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‚Ø§Ù„Ø¨
    function useTemplate(template) {
        const input = document.getElementById('aiInput');
        if (input) {
            input.value = template;
            input.focus();
            adjustTextareaHeight(input);
            closeTemplates();
            showNotification('ğŸ“ Ø§Ù„Ù‚Ø§Ù„Ø¨ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ¹Ø¯ÙŠÙ„');
        }
    }
    
    // Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
    function clearChat() {
        const chatWindow = document.getElementById('aiChatWindow');
        if (chatWindow) {
            chatWindow.innerHTML = `
                <div class="message ai-welcome">
                    <div class="message-avatar">ğŸ¤–</div>
                    <div class="message-content">
                        <div class="message-sender
                        <div class="message-sender">Ù…Ø³Ø§Ø¹Ø¯ Nexus</div>
                        <div class="message-body">
                            <h4>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ Ù…Ø¬Ø¯Ø¯Ø§Ù‹! ğŸ‘‹</h4>
                            <p>ØªÙ… Ù…Ø³Ø­ Ù…Ø­Ø§Ø¯Ø«ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©. ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:</p>
                            <ul>
                                <li>ğŸ“ ÙƒØªØ§Ø¨Ø© Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</li>
                                <li>ğŸ’¡ ØªÙˆÙ„ÙŠØ¯ Ø£ÙÙƒØ§Ø± Ù…Ø­ØªÙˆÙ‰ Ù…Ø¨ØªÙƒØ±Ø©</li>
                                <li>ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</li>
                                <li>ğŸ¨ ØªØµÙ…ÙŠÙ… Ø§Ù„Ø«Ù…Ø¨Ù†ÙŠÙ„Ø§Øª ÙˆØ§Ù„Ø¬Ø±Ø§ÙÙŠÙƒ</li>
                                <li>ğŸ“¡ ØªØ­Ø¶ÙŠØ± Ø®Ø·Ø· Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</li>
                            </ul>
                            <p>ğŸ’¡ <strong>Ù†ØµÙŠØ­Ø©:</strong> Ø§Ø®ØªØ± Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬!</p>
                        </div>
                        <div class="message-time">${new Date().toLocaleTimeString('ar-EG', {
                            hour: '2-digit',
                            minute: '2-digit'
                        })}</div>
                    </div>
                </div>
            `;
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        document.getElementById('chatMemory').textContent = '0';
        document.getElementById('lastActivity').textContent = 'Ø§Ù„Ø¢Ù†';
        
        // Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø­Ù„ÙŠ
        localStorage.removeItem('geminiChatHistory');
        
        showNotification('ğŸ—‘ï¸ ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø¨Ù†Ø¬Ø§Ø­');
        scrollToBottom();
    }
    
    // Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„
    function saveToHistory(question, answer, mode) {
        try {
            const history = JSON.parse(localStorage.getItem('geminiChatHistory') || '[]');
            history.push({
                timestamp: new Date().toISOString(),
                question,
                answer,
                mode,
                length: question.length + answer.length
            });
            
            // Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø¢Ø®Ø± 50 Ø±Ø³Ø§Ù„Ø© ÙÙ‚Ø·
            if (history.length > 50) {
                history.shift();
            }
            
            localStorage.setItem('geminiChatHistory', JSON.stringify(history));
        } catch (error) {
            console.error('Error saving to history:', error);
        }
    }
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    function updateStats() {
        try {
            const history = JSON.parse(localStorage.getItem('geminiChatHistory') || '[]');
            document.getElementById('chatMemory').textContent = history.length;
            document.getElementById('lastActivity').textContent = 'Ø§Ù„Ø¢Ù†';
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù
            const totalChars = history.reduce((sum, item) => sum + item.length, 0);
            if (totalChars > 1000) {
                document.getElementById('chatMemory').textContent += ` (${Math.round(totalChars / 1000)}k Ø­Ø±Ù)`;
            }
        } catch (error) {
            console.error('Error updating stats:', error);
        }
    }
    
    // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
    function showNotification(message) {
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
        const notification = document.createElement('div');
        notification.className = 'ai-notification';
        notification.innerHTML = `
            <div class="notification-content">
                <i class="fas fa-info-circle"></i>
                <span>${message}</span>
            </div>
        `;
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ù†Ù…Ø§Ø·
        if (!document.querySelector('.notification-styles')) {
            const styles = document.createElement('style');
            styles.className = 'notification-styles';
            styles.textContent = `
                .ai-notification {
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%) translateY(-100px);
                    background: linear-gradient(135deg, #6366f1, #8b5cf6);
                    color: white;
                    padding: 12px 24px;
                    border-radius: 12px;
                    box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
                    z-index: 3000;
                    animation: slideDown 0.3s ease-out forwards, fadeOut 0.3s ease-in 2.7s forwards;
                    font-family: 'Cairo', sans-serif;
                    font-size: 14px;
                    max-width: 90%;
                    text-align: center;
                }
                
                @keyframes slideDown {
                    to { transform: translateX(-50%) translateY(0); }
                }
                
                @keyframes fadeOut {
                    to { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                }
                
                .notification-content {
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }
                
                .notification-content i {
                    font-size: 16px;
                }
            `;
            document.head.appendChild(styles);
        }
        
        document.body.appendChild(notification);
        
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ
        setTimeout(() => {
            if (notification.parentNode) {
                notification.remove();
            }
        }, 3000);
    }
    
    // Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ´ØºÙŠÙ„/Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù
    function toggleAIAssistant() {
        const assistant = document.getElementById('geminiAssistant');
        if (assistant) {
            assistant.style.display = assistant.style.display === 'none' ? 'flex' : 'none';
            
            if (assistant.style.display !== 'none') {
                // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© API Ø¹Ù†Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ÙØªØ­
                setTimeout(updateAPIStatus, 100);
                scrollToBottom();
            }
        }
    }
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø¡
    function loadHistory() {
        try {
            const history = JSON.parse(localStorage.getItem('geminiChatHistory') || '[]');
            if (history.length > 0) {
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯ ÙÙ‚Ø·
                document.getElementById('chatMemory').textContent = history.length;
                
                // Ø­Ø³Ø§Ø¨ Ø¢Ø®Ø± Ù†Ø´Ø§Ø·
                const lastItem = history[history.length - 1];
                const lastTime = new Date(lastItem.timestamp);
                const now = new Date();
                const diffMinutes = Math.floor((now - lastTime) / (1000 * 60));
                
                let lastActivityText = 'Ø§Ù„Ø¢Ù†';
                if (diffMinutes > 0) {
                    if (diffMinutes < 60) {
                        lastActivityText = `Ù‚Ø¨Ù„ ${diffMinutes} Ø¯Ù‚ÙŠÙ‚Ø©`;
                    } else if (diffMinutes < 1440) {
                        lastActivityText = `Ù‚Ø¨Ù„ ${Math.floor(diffMinutes / 60)} Ø³Ø§Ø¹Ø©`;
                    } else {
                        lastActivityText = `Ù‚Ø¨Ù„ ${Math.floor(diffMinutes / 1440)} ÙŠÙˆÙ…`;
                    }
                }
                
                document.getElementById('lastActivity').textContent = lastActivityText;
            }
        } catch (error) {
            console.error('Error loading history:', error);
        }
    }
    
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ÙƒÙˆÙ†
    function initGeminiAssistant() {
        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© API
        updateAPIStatus();
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„
        loadHistory();
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ
        const modeSelect = document.getElementById('aiMode');
        if (modeSelect) {
            changeAIMode(modeSelect.value);
        }
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ event listener Ù„ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© API Ø¹Ù†Ø¯Ù…Ø§ ÙŠØªØºÙŠØ±
        if (window.geminiAI) {
            // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ù„Ù„Ø£Ø­Ø¯Ø§Ø« Ù‡Ù†Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† geminiAI ÙŠÙ‚Ø¯Ù…Ù‡Ø§
            setInterval(updateAPIStatus, 30000); // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
        console.log('âœ… Gemini Assistant initialized');
        console.log('ğŸ“ Available functions:');
        console.log('   - sendMessage(): Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©');
        console.log('   - clearChat(): Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©');
        console.log('   - toggleAIAssistant(): Ø¹Ø±Ø¶/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯');
        console.log('   - changeAIMode(mode): ØªØºÙŠÙŠØ± ÙˆØ¶Ø¹ AI');
    }
    
    // ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('DOMContentLoaded', function() {
        // Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ±
        setTimeout(initGeminiAssistant, 100);
    });
    
    // Ø¬Ø¹Ù„ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù…ØªØ§Ø­Ø© Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹
    window.sendMessage = sendMessage;
    window.clearChat = clearChat;
    window.toggleAIAssistant = toggleAIAssistant;
    window.changeAIMode = changeAIMode;
    window.quickAction = quickAction;
    window.setExample = setExample;
    window.showTemplates = showTemplates;
    window.closeTemplates = closeTemplates;
    window.useTemplate = useTemplate;
    window.handleInputKey = handleInputKey;
    window.adjustTextareaHeight = adjustTextareaHeight;
</script>
</div>